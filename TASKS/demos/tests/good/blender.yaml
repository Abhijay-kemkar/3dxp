Main: &main
    Exports: [python, args]
    python: ./PYTHON/BLENDER/import.py
    Slurm: ./SLURM/blender.sbatch
    args: "{STL} -f bfly_1soma/stl/*/*.stl -o {RENDER} --vox={VOX}"
    Constants:
        NAME: blend
        VOX: "32:32:4"
        TODAY: "2017_11_11"
sub-1: &sub-1
    <<: *main
    args: "{STL} -f bfly_1soma/stl/*/*.stl -o {RENDER} -b {BLEND} --vox={VOX} {BLOCK}"
    Inputs:
        BLOCK: "--VOL=100:100:100 --vol=2:2:2 --xyz=0:0:0 --XYZ=-40:-40:-40"
sub-2:
    <<: *main
    args: "{STL} -f bfly_1soma/stl/*/*.stl -o {RENDER} -b {BLEND} --vox={VOX} {BLOCK}"
    Inputs:
        BLOCK: "--VOL=100:100:100 --vol=2:2:2 --xyz=1:1:1 --XYZ=-40:-40:-40"
slice-1: &slice-1
    <<: *main
    python: ./PYTHON/BLENDER/slices.py
    args: "{PNG} -f {SLICES}/*_in_z.png -o {RENDER} -b {BLEND} --vox {VOX} {BLOCK}"
    Inputs:
        SLICES: "bfly_1soma/png/617637"
        BLOCK: "--VOL=100:100:100 --vol=2:2:2 --xyz=0:0:0 --XYZ=-40:-40:-40"
slice-2:
    <<: *main
    python: ./PYTHON/BLENDER/slices.py
    args: "{PNG} -f {SLICES}/*_in_z.png -o {RENDER} -b {BLEND} --vox {VOX} {BLOCK}"
    Inputs:
        SLICES: "bfly_1soma/png/617637"
        BLOCK: "--VOL=100:100:100 --vol=2:2:2 --xyz=1:1:1 --XYZ=-40:-40:-40"
run-1:
    <<: *main
    Needs:
        - <<: *sub-1
        - <<: *slice-1
lighting:
    <<: *main
    python: ./PYTHON/BLENDER/lights.py
    args: "-o {RENDER} -b {BLEND}"
bad-xyz:
    <<: *main
    args: "{STL} -f bfly_1soma/stl/*/*.stl -o {RENDER} --vox={VOX} --xyz=1:1:1"
no-vox:
    <<: *main
    args: "{STL} -f bfly_1soma/stl/*/*.stl -o {RENDER}"
bad-vox:
    <<: *main
    args: "{STL} -f bfly_1soma/stl/*/*.stl --vox={VOX}"
    Inputs:
        VOX: "{VOX}:{VOX}"
bad-nm:
    <<: *main
    args: "{STL} -f bfly_1soma/stl/*/*.stl --nm={NM}"
    Inputs:
        NM: "30:0:0"
bad-vol:
    <<: *main
    args: "{STL} -f bfly_1soma/stl/*/*.stl --VOL={VOL}"
    Inputs:
        VOL: "0:0:0"
bad-infer:
    <<: *main
    args: "{STL} -f bfly_1soma/stl/58146/*.stl"
bad-args:
    <<: *main
    args: "-a -b -c"
bad-path:
    <<: *main
    args: "{STL}"
x3d:
    <<: *main
    args: "{X3D} -f 682/*_*.x3d -o {RENDER} -b {BLEND}"
    Inputs:
        X3D: /n/coxfs01/thejohnhoffer/R0/ids-2017-07-12_final/meshes/x3d
help:
    <<: *main
    args: "-h"
Default:
    Workdir: "git rev-parse --show-toplevel"
    Inputs:
        STL: "./STL"
        PNG: "./PNG"
        BLEND: "./BLENDER/{TODAY}/{NAME}.blend"
        RENDER: "./RENDER/{TODAY}/{NAME}"
    Logs: "./LOGS/{TODAY}/{NAME}"
